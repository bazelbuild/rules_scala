load("//scala:scala.bzl", "scala_library")
load("@io_bazel_rules_scala_config//:config.bzl", "SCALA_MAJOR_VERSION")

scala_library(
    name = "test_reporter",
    srcs = ["JUnitXmlReporter.scala"],
    scalacopts = {
        "3.1": [
            "-deprecation:true",
            "-encoding",
            "UTF-8",
            "-feature",
            "-language:existentials",
            "-language:higherKinds",
            "-language:implicitConversions",
            "-unchecked",
            "-Xfatal-warnings",
        ],
        "2.13": [
            "-deprecation:true",
            "-encoding",
            "UTF-8",
            "-feature",
            "-language:existentials",
            "-language:higherKinds",
            "-language:implicitConversions",
            "-unchecked",
            "-Xfatal-warnings",
            "-Xlint",
            "-Ywarn-dead-code",
            "-Ywarn-numeric-widen",
            "-Ywarn-value-discard",
            "-Wunused:imports",
        ],
        "2.12": [
            "-deprecation:true",
            "-encoding",
            "UTF-8",
            "-feature",
            "-language:existentials",
            "-language:higherKinds",
            "-language:implicitConversions",
            "-unchecked",
            "-Xfatal-warnings",
            "-Xlint",
            "-Yno-adapted-args",
            "-Ywarn-dead-code",
            "-Ywarn-numeric-widen",
            "-Ywarn-value-discard",
            "-Xfuture",
            "-Ywarn-unused-import",
            "-Ypartial-unification",
        ],
        "2.11": [
            "-deprecation:true",
            "-encoding",
            "UTF-8",
            "-feature",
            "-language:existentials",
            "-language:higherKinds",
            "-language:implicitConversions",
            "-unchecked",
            "-Xfatal-warnings",
            "-Xlint",
            "-Yno-adapted-args",
            "-Ywarn-dead-code",
            "-Ywarn-numeric-widen",
            "-Ywarn-value-discard",
            "-Xfuture",
            "-Ywarn-unused-import",
            "-Ypartial-unification",
        ],
    }[SCALA_MAJOR_VERSION],
    visibility = ["//visibility:public"],
    deps = [
        "//scala/private/toolchain_deps:scala_xml",
        "//testing/toolchain:scalatest_classpath",
    ],
)
